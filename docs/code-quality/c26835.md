---
title: Warning C26835
description: "Describes the Microsoft C/C++ code analysis warning C26835, its causes, and how to address it."
ms.date: 03/06/2023
f1_keywords: ["C26835", "RTL_COMPARE_MEMORY_MISUSE"]
helpviewer_keywords: ["C26835"]
---
# Warning C26835

> `RtlCompareMemory` returns the number of matching bytes. Consider replacing this call with `RtlEqualMemory`

## Remarks

When `RtlCompareMemory`'s return value is used in a boolean context, it evaluates to true when there is at least 1 byte that is equal before finding a difference. This behavior is often not intentional. Moreover, comparing the result of `RtlCompareMemory` to 0 evaluates to false if there is at least 1 matching byte. This behavior is different from functions with compare in their name like `strcmp` making the code harder to understand. To check for equality, consider using `RtlEqualMemory` instead.

This warning is available in Visual Studio 2022 version 17.7 and later versions.

## Examples

```cpp
int foo(const void* ptr)
{
	if (RtlCompareMemory("test", ptr, 5) == 0) // C26835
	{
		// ... 
	}
}
```

To fix the issue, verify if the original intention was to check for equality and replace the function call with `RtlEqualMemory`.

```cpp
int foo(const void* ptr)
{
	if (RtlEqualMemory("test", ptr, 5)) // C26835
	{
		// ... 
	}
}
```

## See also

[RtlEqualMemory macro (wdm.h)](/windows-hardware/drivers/ddi/wdm/nf-wdm-rtlequalmemory.md)\
[RtlCompareMemory function (wdm.h)](/windows-hardware/drivers/ddi/wdm/nf-wdm-rtlequalmemory.md)